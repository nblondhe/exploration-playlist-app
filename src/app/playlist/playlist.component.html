<div class="container">
  <div class="lside">
    <div class="top-spacing"></div>
    <div class="actions">
      <div class="wrapper">
        <img class="album-cover" src="{{ currentTrack.coverHigh }}" />
        <div class="current-track">
          {{currentTrack.track}}
          <!-- /
          {{currentTrack.album}} -->
        </div>
        <div *ngFor="let artist of currentTrack.artists; index as i" class="current-artist">
          {{ artist["name"] }}
        </div>
        <div class="album-detail">
          <table class="albumDetail">
            <tr>
              <td class="attr">Album</td>
              <td class="val">{{currentTrack.album}}</td>
            </tr>
            <tr>
              <td class="attr">Released</td>
              <td class="val">{{currentTrack.release | date : 'longDate'}}</td>
            </tr>
            <!-- <tr>
              <td class="attr">Genre</td>
              <td class="val">Ambient, Experimental</td>
            </tr> -->
            <tr *ngIf="currentTrack.added">
              <td class="attr">Added on</td>
              <td class="val">{{currentTrack.added | date : 'MMMM, yyyy'}}</td>
            </tr>
          </table>
        </div>
          <!-- <div class="currentRecommended">
              <a class="link" href="#">
                Recommended Tracks 
              </a>
          </div> -->
      </div>
    </div>
    <div class="wrapper playlist-actions">
      <a class="button button-med raised-white" (click)="currentPlaylist = [];">Clear Playlist</a>
       <a class="button button-med" (click)="createPlaylist();">Create Playlist</a>
    </div>
    <footer>
      <h1 class="brand-med footer">Discovery</h1>
      <div class="user">
        <span>
          Signed in as
        </span>
        <span class="username">
          <img alt="Spotify logo" class="spotify-logo" src="../assets/images/Spotify_Icon_RGB_White.png" />
          <a class="link" href="#">
            {{ spotifyUser }}
          </a>
        </span>
      </div>
      <div class="links">
        <a class="link" href="#">About</a>
        <div class="vr"></div>
        <a class="link" href="https://github.com/nblondhe/LikeBuilder">Github</a>
      </div>
    </footer>
  </div>

  <div class="rside">
    <div *ngIf="savedTracks" class="content-wrapper">
      <!-- <div class='flex-space'></div> -->
      <div id="tabHeader" class="tabContainer">
        <div class="tabHeader">
          <!-- <img alt="saved-tab-icon" class="saved-tab-icon" src="../assets/images/baseline-note.svg" /> -->
          <div id="border" class="border">
            <span class="tab" [class.active-tab]="tab == 'savedTracks'" (click)="tab = 'savedTracks'">
              Saved Tracks
            </span>
            <span class="tab" [class.active-tab]="tab == 'currentPlaylist'" (click)="tab = 'currentPlaylist'">
              Current Playlist
            </span>
          </div>
          <!-- <a class="button" (click)="tab = 'currentPlaylist'">Current Playlist</a> -->
          <!-- <a class="button button-med raised-white">Clear Playlist</a>
            <a class="button button-med">Create Playlist</a> -->
          </div>
        </div>
      <!-- <div class="saved-sub-header">
           <span class="instruction">Click <i>Similar Tracks</i> to view and add recommendations based on your saved tracks</span>
      </div> -->
      <div class="content-container" [ngSwitch]="tab">

        <!-- Saved Track Tab -->
        <div class="content-container" *ngSwitchCase="'savedTracks'">
          <div *ngFor="let track of savedTracks; index as i" class="tracks-list">
            <div #collapseAnchor class="track-row collapsible-parent" (click)="currentTrack = savedTracks[i]">
              <img alt="add" class="add clickable" src="../assets/images/track_add.svg"  (click)="currentPlaylist.push(track)"/>
              <img class="small-cover clickable" src="{{ track.coverLow }}" />
              <div class="track-info">
                <div class="track clickable track-spacing">{{ track.track }}</div>
                <div class="artist clickable track-spacing">
                  <span *ngFor="let artist of track.artists; index as j">
                    {{ artist.name }}
                    <span *ngIf="
                                        track.artists.length > 1 && j !== track.artists.length - 1
                                        ">,&nbsp;</span>
                  </span>
                </div>
              </div>
              <div class="track-actions">
                <a class="button similar raised-white" style="padding-right: 48px;" (click)="toggleRecommendation($event, i)">
                  Similar Tracks
                </a>
                <img alt="expand" (click)="toggleRecommendation($event, i)" class="expand lg-screen clickable"
                  src="../assets/images/expand_more_secondary.svg" />
                <!-- show on mobile, hide button -->
                <img alt="expand" (click)="toggleRecommendation($event, i)" class="sm-screen clickable"
                  src="../assets/images/expand_more.svg" />
              </div>
            </div>
        
            <div class="collapsed ">
              <div class="rec-sub-header collapsed-top-inset">
                <span class="flex-space"></span>
                <div class="clickable add-all" (click)="addAllRecommendations(track.id)">
                  <img alt="add" class="add clickable" src="../assets/images/playlist_add.svg" />
                  <span class="col-head text-color">
                    Add all
                  </span>
                </div>
              </div>
              <div *ngFor="let rec of recStore[track.id]; index as k;" [ngClass]="{'collapsed-bottom-inset': k == 4}"
                class="track-row rec-row" (click)="currentTrack = recStore[track.id][k]">
                <img alt="add" class="add clickable" src="../assets/images/track_add.svg" (click)="currentPlaylist.push(rec)"/>
                <img class="small-cover clickable" src="{{ rec.coverLow }}" />
                <div>
                  <div class="track clickable track-spacing"> {{ rec.track }}</div>
                  <div class="artist clickable track-spacing">
                    <span *ngFor="let artist of rec.artists; index as k">
                      {{ artist.name }}
                      <span *ngIf="rec.artists.length > 1 && k !== rec.artists.length - 1">,&nbsp;</span>
                    </span>
                  </div>
                </div>
                <div class="track-actions">
                  <img alt="remove" class="remove clickable" src="../assets/images/remove_icon.svg" />
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- End Saved Track -->

        <!-- Current Playlist Tab -->
        <div class="content-container" *ngSwitchCase="'currentPlaylist'">
            <div *ngFor="let track of currentPlaylist; index as i" class="tracks-list">
                <div #collapseAnchor class="track-row collapsible-parent" (click)="currentTrack = currentPlaylist[i]">
                  <img alt="add" class="add clickable" src="../assets/images/track_add.svg" />
                  <img class="small-cover clickable" src="{{ track.coverLow }}" />
                  <div class="track-info">
                    <div class="track clickable track-spacing">{{ track.track }}</div>
                    <div class="artist clickable track-spacing">
                      <span *ngFor="let artist of track.artists; index as j">
                        {{ artist.name }}
                        <span *ngIf="
                            track.artists.length > 1 && j !== track.artists.length - 1
                            ">,&nbsp;</span>
                      </span>
                    </div>
                  </div>
                  <div class="track-actions">
                  </div>
                </div>
      
              </div>
        </div>
        <!-- End Current Playlist -->

      </div>

    </div>
  </div>

</div>