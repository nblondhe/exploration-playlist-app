<div class="container">
  <div class="lside">
    <div class="top-spacing"></div>
    <div class="actions">
      <div class="wrapper">
        <img class="album-cover" src="{{ currentTrack.coverHigh }}" />
        <div class="current-track">
          {{currentTrack.track}}
          /
          {{currentTrack.album}}
        </div>
        <div *ngFor="let artist of currentTrack.artists; index as i" class="current-artist">
          {{ artist["name"] }}
        </div>
      </div>
    </div>
    <div class="wrapper">
      <!-- <a class="button button-med stroked">Clear Playlist</a>
    <a class="button button-med">Create Playlist</a> -->
    </div>
    <footer>
      <h1 class="brand footer">LikeFilter</h1>
      <div class="user">
        <span>
          Signed in as
        </span>
        <span class="username">
            <img alt="Spotify logo" class="spotify-logo" src="../assets/images/Spotify_Icon_RGB_White.png" />
            <a class="link" href="#">
              {{ spotifyUser }}
            </a>
          </span>
        </div>
        <div class="links">
          <a class="link" href="#">About</a>
          <div class="vr"></div>
          <a class="link" href="https://github.com/nblondhe/LikeBuilder">Github</a>
        </div>
    </footer>
  </div>

  <div class="rside">
    <div *ngIf="savedTracks" class="content-wrapper">
      <div class="track-row action-header">
          <span class="current-tab col-head">
              Saved Tracks
           </span>
        <div class="header-actions">
          <a class="button button-med stroked">Clear Playlist</a>
          <a class="button button-med">Create Playlist</a>
        </div>
      </div>
      <div class="saved-sub-header">
           <span class="flex-space"></span>
          <!-- <span class="col-head rec">
            Similar Tracks
          </span> -->
      </div>
      <div *ngFor="let track of savedTracks; index as i" class="tracks-list">
        <div 
          #collapseAnchor 
          class="track-row collapsible-parent" 
          (click)="currentTrack = savedTracks[i]">
            <img alt="add" class="add clickable" src="../assets/images/add_icon.svg" />
            <img class="small-cover clickable" src="{{ track.coverLow }}" />
            <div>
              <div class="track clickable track-spacing">{{ track.track }}</div>
              <div class="artist clickable track-spacing">
                <span *ngFor="let artist of track.artists; index as j">
                  {{ artist.name }}
                  <span *ngIf="
                  track.artists.length > 1 && j !== track.artists.length - 1
                  ">,&nbsp;</span>
                </span>
              </div>
            </div>
            <div class="track-actions">
              <!-- <span class="similar">
                Similar Tracks
              </span> -->
              <a class="button similar raised-white" (click)="toggleRecommendation($event, i)">
                Similar Tracks
              </a>
              <img alt="expand" class="expand clickable" src="../assets/images/expand_more_secondary.svg" />
            </div>
        </div>


        <div class="collapsed ">
            <div class="rec-sub-header collapsed-top-inset">
              <img alt="add" class="add clickable" src="../assets/images/add_icon.svg" />
                <span class="col-head text-color">
                  Add all
                </span>
                <span class="flex-space"></span>
                <!-- <span class="col-head">
                  Similar Tracks
                </span> -->
            </div>
            <div 
              *ngFor="let rec of recStore[track.id]; index as k;" 
              [ngClass]="{'collapsed-bottom-inset': k == 4}"
              class="track-row rec-row">
              <img alt="add" class="add clickable" src="../assets/images/add_icon.svg" />
              <img class="small-cover clickable" src="{{ rec.coverLow }}" />
              <div>
                <div class="track clickable track-spacing"> {{ rec.track }}</div>
                <div class="artist clickable track-spacing">
                  <span *ngFor="let artist of rec.artists; index as k">
                    {{ artist.name }}
                    <span *ngIf="
                          rec.artists.length > 1 && k !== rec.artists.length - 1
                          ">,&nbsp;</span>
                  </span>
                </div>
              </div>
              <div class="track-actions">
                <img alt="remove" class="remove clickable" src="../assets/images/remove_icon.svg" />
              </div>
            </div>
          </div>


      </div>
    </div>
  </div>

</div>